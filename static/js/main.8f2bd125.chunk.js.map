{"version":3,"sources":["pages/chart/ChartBlock.tsx","components/NavigationBar.tsx","components/Supplement.tsx","pages/chart/FormBlock.tsx","utils/BinaryIndexedTree.ts","utils/RankReproducer.ts","utils/index.ts","utils/Chart.ts","utils/RatingColor.ts","pages/chart/LineChartLabel.tsx","pages/chart/LineChartTooltip.tsx","pages/chart/RankLineChart.tsx","pages/chart/ScoreLineChart.tsx","utils/Data.ts","pages/chart/index.tsx","pages/standings/FormBlock.tsx","components/PaginationPanel.tsx","pages/standings/StandingsTable.tsx","pages/standings/index.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["ChartTab","NavigationBar","useState","isOpen","setIsOpen","Navbar","color","light","expand","fixed","NavbarBrand","tag","Link","to","NavbarToggler","onClick","Collapse","navbar","Nav","className","NavItem","NavLink","style","marginRight","icon","faChartLine","faSortAmountDown","Supplement","href","getContestDropdownLabel","contest","dataFormat","Date","start_time_unix","contest_name","FormBlock","props","paramUsers","paramContest","contests","length","contest_slug","setContest","user","setUser","chartPagePath","useMemo","generatePath","history","useHistory","useEffect","unmounted","Row","Col","sm","FormGroup","width","Label","for","Input","type","name","id","value","onChange","e","target","map","_contest","placeholder","onKeyPress","key","push","Button","block","BinaryIndexedTree","_length","data","this","Array","fill","k","ret","x","l","r","sum","ContestUserState","taskScoreMap","score","afterTargetUser","Map","contestSubmission","inverted","val","has","task","curVal","get","set","getRankSequence","contestSubmissions","some","user_name","userLength","scoreSet","Set","add","userSubmissionsMap","forEach","size","userSubmissions","contestUserState","addSubmission","scores","from","values","sort","a","b","reverse","pop","unshift","compress","index","bit","curScore","curIndex","curRank","seq","userStateMap","tmpUserState","oldScore","newScore","oldIndex","newIndex","query","time_unix","rank","status","overtakeUserName","overtakeUserOldScore","overtakeUserNewScore","formatScore","String","replace","formatElapsedSec","elapsedSec","sign","days","Math","floor","hours","minutes","seconds","pad","num","slice","getDatetimeTicks","contestDurationHours","end_time_unix","interval_sec","offsetMinutes","getTimezoneOffset","cur","getDatetimeTickFormatter","format","scoreTickFormatter","digitlen","toFixed","chartLineColors","getChartLineColor","RatingColors","getRatingColorClass","rating","min","getRatingColor","LineChartLabel","y","rankChartDataSequence","getText","chartId","undefined","text","colorFillId","height","floodColor","floodOpacity","operator","in","filter","fontSize","LineChartTooltip","active","payload","label","perfs","margin","padding","backgroundColor","border","whiteSpace","payloadContainer","curPayload","realRating","correctedPerf","exp","marginTop","marginBottom","stroke","display","paddingTop","paddingBottom","marginLeft","element","RankLineChart","sequences","showDots","showACLabels","rankTicks","ma","d","pow","log10","ma0","ceil","getRankTicks","reduce","curValue","ma_","curValue_","max","maxRankForChart","ResponsiveContainer","LineChart","top","right","bottom","left","borders","ratingColor","getRatingColorCode","ReferenceArea","x1","x2","y1","y2","isFront","opacity","CartesianGrid","strokeDasharray","XAxis","dataKey","domain","tickFormatter","ticks","offset","position","YAxis","angle","reversed","Tooltip","content","Legend","entry","Line","dot","fillOpacity","strokeWidth","LabelList","i","j","ordinalSuffixOf","ScoreLineChart","scoreUpdateSequences","rankChartData","decreasingOrderContestSlugs","ChartBlock","users","setShowDots","showScoreUpdateLabels","setShowScoreUpdateLabels","activeTab","setActiveTab","Alert","textAlign","includes","every","invalidUser","invalidUsers","maxRankText","prev","rankChartdata","maxtime","maxrank","tweetTitle","join","ButtonGroup","check","inline","checked","TwitterShareButton","url","window","location","title","TwitterIcon","round","UncontrolledTooltip","placement","replaceAll","CONTEST_SUBMISSION_MAP","fetchContestSubmissions","Promise","resolve","fetch","process","catch","Error","then","json","submissions","CONTEST_TASK_MAP","fetchContestTasks","tasks","CONTESTS","fetchContests","PERF_MAP","fetchPerfs","contestSlug","ChartPage","match","params","paramUser","useSWR","contestsError","error","contestSubmissionsError","tmpContest","find","perfsError","split","_user","trim","contestMap","prevMap","rel","parsedDatetime","cursorDate","setCursorDate","standingsPagePath","lb","ub","showTimeSelect","dateFormat","timeFormat","selected","date","customInput","minDate","maxDate","filterTime","getTime","pageList","currPage","pageStartIndex","totalPages","start","end","v","pageNumbers","tmpExp","tmpPageNumber","PaginationPanel","renderSizePerPage","totalSize","sizePerPage","sizePerPageList","onSizePerPageChange","page","onPageChange","p","Pagination","flexWrap","justifyContent","pageNumber","PaginationItem","PaginationLink","compareUserStandingsTaskEntry","score_time","submit_count","_sortCaret","order","faSortUp","faSortDown","faSort","StandingsTable","contestTasks","userStandingsEntriesMap","userStandingsEntry","submit_count_ce","curTask","task_slug","targetTaskEntry","userStandingsEntries","columns","dataField","classes","headerClasses","sortFunc","sortCaret","textFilter","formatter","cell","_row","_rowIndex","btnId","faSearch","formatExtraData","row","_a","_b","_dataField","rowA","rowB","isDummyField","_cell","userTaskEntry","headerFormatter","column","_colIndex","components","sortElement","entryA","entryB","pagination","paginationFactory","custom","paginationProps","paginationTableProps","keyField","bootstrap4","striped","filterFactory","wrapperClasses","datetimeRegExp","StandingsPage","paramDatetime","exec","parseParamDatetime","datetime","contestTasksError","App","revalidateOnFocus","Container","maxWidth","exact","path","component","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.8f2bd125.chunk.js","sourcesContent":["import React, { useState } from 'react';\nimport { TwitterIcon, TwitterShareButton } from 'react-share';\nimport {\n  Input,\n  Row,\n  FormGroup,\n  Label,\n  Col,\n  ButtonGroup,\n  Button,\n  UncontrolledTooltip,\n  Alert,\n} from 'reactstrap';\nimport dataFormat from 'dateformat';\nimport Contest from '../../interfaces/Contest';\nimport Submission from '../../interfaces/Submission';\nimport { getRankSequence, RankChartData } from '../../utils/RankReproducer';\nimport { RankLineChart } from './RankLineChart';\nimport { ScoreLineChart } from './ScoreLineChart';\nimport Perfs from '../../interfaces/Perfs';\n\nenum ChartTab {\n  'rank' = 0,\n  'score' = 1,\n}\n\ninterface Props {\n  users: string[];\n  contest?: Contest;\n  contestSubmissions: Submission[];\n  perfs?: Perfs;\n}\n\nconst decreasingOrderContestSlugs = [\n  'ahc017',\n  'ahc018',\n  'toyota-hc-2023spring',\n  'ahc019',\n  'ahc025',\n  'ahc027',\n  'ahc030',\n  'ahc031',\n  'ahc033',\n];\n\nexport const ChartBlock: React.FC<Props> = (props) => {\n  const { users, contest, contestSubmissions, perfs } = props;\n\n  const [showDots, setShowDots] = useState<boolean>(true);\n  const [showScoreUpdateLabels, setShowScoreUpdateLabels] = useState<boolean>(\n    true\n  );\n  const [activeTab, setActiveTab] = useState<ChartTab>(ChartTab.rank);\n\n  if (!contest) {\n    return <div style={{ height: '50px' }}></div>;\n  }\n  if (users.length === 0) {\n    return (\n      <Alert\n        color=\"danger\"\n        style={{\n          marginTop: '50px',\n          marginBottom: '50px',\n        }}\n      >\n        UserName is empty or invalid.\n      </Alert>\n    );\n  }\n  if (contestSubmissions.length === 0) {\n    return (\n      <div\n        style={{\n          width: '100%',\n          height: '500px',\n          textAlign: 'center',\n          marginTop: '100px',\n          marginBottom: '100px',\n        }}\n      >\n        Fetch data...\n      </div>\n    );\n  }\n\n  const sequences: [string, RankChartData[]][] = users.map((user) => [\n    user,\n    getRankSequence(\n      user,\n      contestSubmissions,\n      decreasingOrderContestSlugs.includes(contest.contest_slug)\n    ),\n  ]);\n  if (sequences.every((entry) => entry[1].length === 0)) {\n    return (\n      <>\n        {sequences\n          .map((entry) => entry[0])\n          .map((invalidUser: string) => {\n            return (\n              <Alert\n                key={invalidUser}\n                color=\"danger\"\n                style={{\n                  marginTop: '10px',\n                  marginBottom: '20px',\n                }}\n              >\n                {`UserName ${invalidUser} is not in the data.`}\n              </Alert>\n            );\n          })}\n      </>\n    );\n  }\n  const invalidUsers: string[] = sequences\n    .filter((entry) => entry[1].length === 0)\n    .map((entry) => entry[0]);\n\n  let maxRankText = '';\n  if (sequences.length === 1) {\n    const [maxtime, maxrank] = sequences[0][1].reduce(\n      (\n        prev: [number, number],\n        rankChartdata: RankChartData\n      ): [number, number] => {\n        if (rankChartdata.type !== 'update') return prev;\n        const prevRank = prev[1];\n        if (prevRank < rankChartdata.rank) return prev;\n        return [rankChartdata.time_unix, rankChartdata.rank];\n      },\n      [-1, contestSubmissions.length] as [number, number]\n    );\n    maxRankText = `\\n最大瞬間風速は ${maxrank} 位 (${dataFormat(\n      new Date(maxtime * 1000),\n      'mm/dd HH:MM'\n    )}) だよ！`;\n  }\n  const tweetTitle =\n    `${users.join(',')}'s replay of ${contest.contest_name}\\n` +\n    `${maxRankText}\\n` +\n    `AtCoder Marathon Replay`;\n\n  return (\n    <>\n      {invalidUsers.length > 0 &&\n        invalidUsers.map((invalidUser: string) => {\n          return (\n            <Alert\n              key={invalidUser}\n              color=\"danger\"\n              style={{\n                marginTop: '10px',\n                marginBottom: '20px',\n              }}\n            >\n              {`UserName ${invalidUser} is not in the data.`}\n            </Alert>\n          );\n        })}\n      <Row style={{ marginTop: '30px' }}>\n        <Col>\n          <ButtonGroup className=\"form-check-inline\">\n            <Button\n              color=\"secondary\"\n              onClick={() => {\n                setActiveTab(ChartTab.rank);\n              }}\n              active={activeTab === ChartTab.rank}\n            >\n              Rank\n            </Button>\n            <Button\n              color=\"secondary\"\n              onClick={() => {\n                setActiveTab(ChartTab.score);\n              }}\n              active={activeTab === ChartTab.score}\n            >\n              Score\n            </Button>\n          </ButtonGroup>\n          <FormGroup check inline>\n            <Label check>\n              <Input\n                type=\"checkbox\"\n                checked={showDots}\n                onChange={(e) => setShowDots(e.target.checked)}\n              />\n              Show Dots\n            </Label>\n          </FormGroup>\n          <FormGroup check inline>\n            <Label check>\n              <Input\n                type=\"checkbox\"\n                checked={showScoreUpdateLabels}\n                onChange={(e) => setShowScoreUpdateLabels(e.target.checked)}\n              />\n              Show Score Update Labels\n            </Label>\n          </FormGroup>\n        </Col>\n      </Row>\n\n      <h4\n        style={{\n          textAlign: 'center',\n          marginTop: '30px',\n          marginBottom: '-30px',\n        }}\n      >\n        Replay of {contest.contest_name}\n      </h4>\n      {activeTab === ChartTab.rank && (\n        <RankLineChart\n          sequences={sequences}\n          contest={contest}\n          showDots={showDots}\n          showACLabels={showScoreUpdateLabels}\n          perfs={perfs}\n        />\n      )}\n      {activeTab === ChartTab.score && (\n        <ScoreLineChart\n          sequences={sequences}\n          contest={contest}\n          showDots={showDots}\n          showACLabels={showScoreUpdateLabels}\n        />\n      )}\n\n      <div style={{ textAlign: 'center' }}>\n        <TwitterShareButton\n          url={window.location.href}\n          title={tweetTitle}\n          id=\"chart-share-button\"\n        >\n          <TwitterIcon size={40} round />\n        </TwitterShareButton>\n        <UncontrolledTooltip placement=\"top\" target=\"chart-share-button\">\n          {(tweetTitle + ' ' + window.location.href).replaceAll('\\n', ' ')}\n        </UncontrolledTooltip>\n      </div>\n    </>\n  );\n};\n","import React, { useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport {\n  Collapse,\n  Nav,\n  Navbar,\n  NavLink,\n  NavbarBrand,\n  NavbarToggler,\n  NavItem,\n} from 'reactstrap';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport {\n  faChartLine,\n  faSortAmountDown,\n} from '@fortawesome/free-solid-svg-icons';\n\nexport const NavigationBar: React.FC = () => {\n  const [isOpen, setIsOpen] = useState(false);\n  const toggle = () => setIsOpen(!isOpen);\n\n  return (\n    <Navbar color=\"light\" light expand=\"md\" fixed=\"top\">\n      <NavbarBrand tag={Link} to={'/'}>\n        AtCoder Marathon Replay\n      </NavbarBrand>\n      <NavbarToggler onClick={toggle} />\n      <Collapse isOpen={isOpen} navbar>\n        <Nav className=\"mr-auto\" navbar>\n          <NavItem>\n            <NavLink tag={Link} to=\"/chart/\">\n              <FontAwesomeIcon\n                style={{ marginRight: '4px' }}\n                icon={faChartLine}\n              />\n              Chart\n            </NavLink>\n          </NavItem>\n          <NavItem>\n            <NavLink tag={Link} to=\"/standings/\">\n              <FontAwesomeIcon\n                style={{ marginRight: '4px' }}\n                icon={faSortAmountDown}\n              />\n              Standings\n            </NavLink>\n          </NavItem>\n        </Nav>\n      </Collapse>\n    </Navbar>\n  );\n};\n","import React from 'react';\n\nexport const Supplement: React.FC = () => (\n  <>\n    <h2>補足</h2>\n    <p>\n      以下のコンテストの問題に対する各ユーザの最終提出は，プレテスト得点が不明であるため，システムテストの得点に下記の倍率を掛けた値を用いています．\n    </p>\n    <ul>\n      <li>\n        <del>ahc001: 50 / 1000</del> →{' '}\n        <a href=\"https://www.dropbox.com/s/rqrlprp0zoyi4di/result_ahc001.csv?dl=0\">\n          result_ahc001.csv\n        </a>{' '}\n        から Provisional Score を取り込みました．\n      </li>\n      <li>hokudai-hitachi2020: 16 / 200</li>\n      <li>hokudai-hitachi2019-2: 30 / 100</li>\n      <li>hokudai-hitachi2019-1: 30 / 100</li>\n      <li>hokudai-hitachi2018: 15 / 100</li>\n      <li>hokudai-hitachi2017-2: 30 / 150</li>\n      <li>hokudai-hitachi2017-1: 30 / 150</li>\n    </ul>\n  </>\n);\n","import React, { useState, useMemo, useEffect } from 'react';\nimport { NavLink, useHistory } from 'react-router-dom';\nimport { Button, Input, Row, FormGroup, Label, Col } from 'reactstrap';\nimport dataFormat from 'dateformat';\nimport Contest from '../../interfaces/Contest';\n\ninterface Props {\n  paramUsers: string;\n  paramContest: string;\n  contests: Contest[];\n}\n\nconst generatePath = (contest: string, user: string): string =>\n  `/chart/${contest}/${user}`;\nconst getContestDropdownLabel = (contest: Contest): string =>\n  `${dataFormat(new Date(contest.start_time_unix * 1000), 'yyyy-mm-dd')} ${\n    contest.contest_name\n  }`;\n\nexport const FormBlock: React.FC<Props> = (props) => {\n  const { paramUsers, paramContest, contests } = props;\n  const [contest, setContest] = useState(\n    paramContest !== ''\n      ? paramContest\n      : contests.length > 0\n      ? contests[0].contest_slug\n      : ''\n  );\n  const [user, setUser] = useState(paramUsers);\n  const chartPagePath = useMemo(() => generatePath(contest, user), [\n    contest,\n    user,\n  ]);\n  const history = useHistory();\n\n  useEffect(() => {\n    let unmounted = false;\n    const setDefaultContestValue = () => {\n      if (!unmounted && contests.length > 0 && contest === '')\n        setContest(contests[0].contest_slug);\n    };\n    void setDefaultContestValue();\n    const cleanup = () => {\n      unmounted = true;\n    };\n    return cleanup;\n  }, [contests]);\n\n  return (\n    <>\n      <Row>\n        <Col sm={12}>\n          <FormGroup style={{ width: '100%' }}>\n            <Label for=\"input-contest\">CONTEST:</Label>\n            <Input\n              type=\"select\"\n              name=\"input-contest\"\n              id=\"input-contest\"\n              value={contest}\n              onChange={(e): void => setContest(e.target.value)}\n            >\n              {contests.map((_contest: Contest) => {\n                return (\n                  <option\n                    value={_contest.contest_slug}\n                    key={_contest.contest_slug}\n                  >\n                    {getContestDropdownLabel(_contest)}\n                  </option>\n                );\n              })}\n            </Input>\n          </FormGroup>\n        </Col>\n      </Row>\n      <Row>\n        <Col sm={12}>\n          <FormGroup style={{ width: '100%' }}>\n            <Label for=\"input-user\">ATCODER ID (COMMA SEPARATED):</Label>\n            <Input\n              value={user}\n              type=\"text\"\n              name=\"input-user\"\n              id=\"input-user\"\n              placeholder={user ? user : 'user1,user2,...'}\n              onChange={(e): void => setUser(e.target.value)}\n              onKeyPress={(e): void => {\n                if (e.key === 'Enter') {\n                  history.push(chartPagePath);\n                }\n              }}\n            />\n          </FormGroup>\n        </Col>\n      </Row>\n      <Row>\n        <Col sm={12}>\n          <Button color=\"primary\" tag={NavLink} to={chartPagePath} block>\n            Replay!\n          </Button>\n        </Col>\n      </Row>\n    </>\n  );\n};\n","export class BinaryIndexedTree {\n  data: number[];\n  length: number;\n  constructor(_length: number) {\n    this.length = _length;\n    this.data = (Array(++_length) as number[]).fill(0);\n  }\n  sum(k: number): number {\n    let ret = 0;\n    for (++k; k > 0; k -= k & -k) ret += this.data[k];\n    return ret;\n  }\n  add(k: number, x: number): void {\n    for (++k; k < this.data.length; k += k & -k) this.data[k] += x;\n  }\n  // query for [l, r)\n  query(l: number, r: number): number {\n    return this.sum(r - 1) - this.sum(l - 1);\n  }\n}\n","import Submission from '../interfaces/Submission';\nimport { BinaryIndexedTree } from './BinaryIndexedTree';\n\nclass ContestUserState {\n  taskScoreMap: Map<string, number>;\n  score: number;\n  afterTargetUser: boolean;\n  constructor() {\n    this.taskScoreMap = new Map<string, number>();\n    this.score = 0;\n    this.afterTargetUser = false;\n  }\n  addSubmission(contestSubmission: Submission, inverted: boolean): void {\n    const val = contestSubmission.score;\n    if (this.taskScoreMap.has(contestSubmission.task)) {\n      // 2回目以降の提出\n      const curVal = this.taskScoreMap.get(contestSubmission.task) as number;\n      if (inverted) {\n        // loss 増加\n        if (curVal === 0) {\n          // 前回も今回も 0 点なら無視する\n          if (val === 0) return;\n          // loss が増加した場合は curVal < val になるが，\n          // 前回の提出 (curVal) が 0 点で今回の提出 (val) が正の得点の場合も curVal < val になるので，\n          // curVal === 0 のみ別途判定する\n        } else if (curVal < val || val === 0) return;\n      } else {\n        // score 減少\n        if (curVal > val) return;\n      }\n      this.score += val - curVal;\n    } else {\n      // 初回提出\n      this.score += val;\n    }\n    this.taskScoreMap.set(contestSubmission.task, val);\n  }\n}\n\nexport interface RankChartData {\n  user: string;\n  time_unix: number;\n  rank: number;\n  score: number;\n  type: 'update' | 'overtook';\n  task: string;\n  status: string;\n  oldScore?: number;\n  overtakeUserName?: string;\n  overtakeUserOldScore?: number;\n  overtakeUserNewScore?: number;\n}\n\nexport const getRankSequence = (\n  user: string,\n  contestSubmissions: Submission[],\n  inverted: boolean\n): RankChartData[] => {\n  if (\n    !contestSubmissions.some(\n      (contestSubmission: Submission): boolean =>\n        contestSubmission.user_name === user\n    )\n  ) {\n    return [] as RankChartData[];\n  }\n  // assert ユーザがいる\n\n  // 一度目のシミュレート（各ユーザの得点計算のみ）\n  const scoreSet = new Set<number>(); // ありうる得点一覧\n  scoreSet.add(0);\n  let userLength; // ユーザ数\n  {\n    const userSubmissionsMap = new Map<string, Submission[]>(); // ユーザ名→提出一覧\n    contestSubmissions.forEach((contestSubmission: Submission): void => {\n      if (userSubmissionsMap.has(contestSubmission.user_name)) {\n        userSubmissionsMap\n          .get(contestSubmission.user_name)\n          ?.push(contestSubmission);\n      } else {\n        userSubmissionsMap.set(contestSubmission.user_name, [\n          contestSubmission,\n        ]);\n      }\n    });\n    userLength = userSubmissionsMap.size;\n\n    userSubmissionsMap.forEach((userSubmissions: Submission[]): void => {\n      const contestUserState = new ContestUserState();\n      userSubmissions.forEach((contestSubmission: Submission): void => {\n        contestUserState.addSubmission(contestSubmission, inverted);\n        scoreSet.add(contestUserState.score);\n      });\n    });\n  }\n\n  // 得点一覧を生成\n  const scores: number[] = Array.from(scoreSet.values());\n  void scores.sort((a, b) => a - b);\n  if (inverted) {\n    // 0, Max, Max-1, ..., 2, 1 の順にする\n    scores.reverse();\n    scores.pop();\n    scores.unshift(0);\n  }\n\n  // 座圧用辞書を作成\n  const compress = new Map<number, number>(); // 得点→インデックス\n  scores.forEach((score: number, index: number): void => {\n    compress.set(score, index);\n  });\n\n  // 二度目のシミュレート（各段階における順位の計算）\n  const bit: BinaryIndexedTree = new BinaryIndexedTree(scores.length); // 各得点に何人いるか\n  bit.add(compress.get(0) as number, userLength); // 全員を 0 点として扱う\n  let curScore = 0;\n  let curIndex = 0;\n  let curRank = 1;\n  const seq: RankChartData[] = [];\n  {\n    const userStateMap = new Map<string, ContestUserState>();\n    contestSubmissions.forEach((contestSubmission: Submission): void => {\n      if (!userStateMap.has(contestSubmission.user_name)) {\n        const tmpUserState = new ContestUserState();\n        tmpUserState.afterTargetUser = true;\n        userStateMap.set(contestSubmission.user_name, tmpUserState);\n      }\n      const contestUserState = userStateMap.get(\n        contestSubmission.user_name\n      ) as ContestUserState;\n      const oldScore = contestUserState.score;\n      // const oldAfterTargetUser = contestUserState.afterTargetUser;\n      contestUserState.addSubmission(contestSubmission, inverted);\n      // contestUserState.afterTargetUser = false;\n      const newScore = contestUserState.score;\n      if (newScore !== oldScore) {\n        // スコア更新\n        const oldIndex = compress.get(oldScore) as number;\n        const newIndex = compress.get(newScore) as number;\n        bit.add(oldIndex, -1);\n        bit.add(newIndex, 1);\n        if (contestSubmission.user_name === user) {\n          // curScore 以上の得点を取っている人数が順位\n          curScore = newScore;\n          curIndex = newIndex;\n          curRank = bit.query(newIndex, scores.length);\n          seq.push({\n            user: user,\n            type: 'update',\n            time_unix: contestSubmission.time_unix,\n            rank: curRank,\n            score: newScore,\n            oldScore: oldScore,\n            task: contestSubmission.task,\n            status: contestSubmission.status,\n          });\n        } else {\n          if (newIndex < curIndex) {\n            // 追い越さなかった\n            contestUserState.afterTargetUser = false;\n            return;\n          } else if (newIndex === curIndex) {\n            // 同点になったけど追い越さなかった\n            contestUserState.afterTargetUser = true;\n            return;\n          } else {\n            // 追い越したか，あるいは最初から高い順位にいるか\n            if (oldIndex > curIndex) {\n              // 最初から得点が高い\n              contestUserState.afterTargetUser = false;\n              return;\n            } else if (\n              oldIndex === curIndex &&\n              !contestUserState.afterTargetUser\n            ) {\n              // ターゲットユーザよりも先に今の得点を取っていた\n              return;\n            }\n            // assert 追い越した\n            // console.log(`${oldScore} -> (${curScore}) -> ${newScore}`);\n            seq.push({\n              user: user,\n              type: 'overtook',\n              time_unix: contestSubmission.time_unix,\n              rank: ++curRank,\n              score: curScore,\n              overtakeUserName: contestSubmission.user_name,\n              overtakeUserOldScore: oldScore,\n              overtakeUserNewScore: newScore,\n              task: contestSubmission.task,\n              status: contestSubmission.status,\n            });\n            contestUserState.afterTargetUser = false;\n          }\n        }\n      }\n    });\n  }\n  return seq;\n};\n","export const formatScore = (score: number): string =>\n  String(score).replace(/(\\d)(?=(\\d\\d\\d)+(?!\\d))/g, '$1,');\n\nexport const formatElapsedSec = (elapsedSec: number): string => {\n  const sign = elapsedSec < 0 ? '-' : '';\n  if (elapsedSec < 0) elapsedSec *= -1;\n  const days = Math.floor(elapsedSec / (3600 * 24));\n  const hours = Math.floor((elapsedSec / 3600) % 24);\n  const minutes = Math.floor((elapsedSec / 60) % 60);\n  const seconds = Math.floor(elapsedSec % 60);\n  const pad = (num: number): string => `0${num}`.slice(-2);\n  return `${sign}${days > 0 ? `${days}d ` : ''}${\n    days > 0 ? pad(hours) : hours\n  }:${pad(minutes)}:${pad(seconds)}`;\n};\n\n/**\n * returns suffix string of order, e.g. \"st\" of \"1st\".\n *\n * @param {number} i number representing order\n * @returns suffix string of order\n */\nexport const ordinalSuffixOf = (i: number): 'st' | 'nd' | 'rd' | 'th' => {\n  const j = i % 10;\n  const k = i % 100;\n  if (j === 1 && k !== 11) {\n    return 'st';\n  }\n  if (j === 2 && k !== 12) {\n    return 'nd';\n  }\n  if (j === 3 && k !== 13) {\n    return 'rd';\n  }\n  return 'th';\n};\n\n/**\n * returns array [start, start+1, ..., end].\n *\n * @param {number} start start number\n * @param {number} end end number\n * @returns {number[]} array\n */\nexport const range = (start: number, end: number): number[] =>\n  Array.from({ length: end - start + 1 }, (v, k) => k + start);\n","import dataFormat from 'dateformat';\nimport Contest from '../interfaces/Contest';\n\nexport const getDatetimeTicks = (contest: Contest): number[] => {\n  const contestDurationHours =\n    (contest.end_time_unix - contest.start_time_unix) / 3600;\n  let interval_sec = 3600;\n  if (contestDurationHours <= 6) {\n    interval_sec = 1800; // 6 時間以内なら 0.5 時間ごとに\n  } else if (contestDurationHours <= 12) {\n    interval_sec = 3600; // 12 時間以内なら 1 時間ごとに\n  } else if (contestDurationHours <= 24) {\n    interval_sec = 3600 * 2; // 24 時間以内なら 2 時間ごとに\n  } else if (contestDurationHours <= 24 * 3) {\n    interval_sec = 3600 * 6; // 3 日以内なら 6 時間ごとに\n  } else {\n    interval_sec = 3600 * 24; // 1 日ごと\n  }\n  const offsetMinutes: number = new Date(0).getTimezoneOffset(); // -9*60 in Asia/Tokyo (JST)\n  const ret: number[] = [contest.start_time_unix];\n  for (\n    let cur =\n      contest.start_time_unix -\n      ((contest.start_time_unix - 60 * offsetMinutes) % interval_sec) +\n      interval_sec;\n    cur < contest.end_time_unix;\n    cur += interval_sec\n  ) {\n    ret.push(cur);\n  }\n  ret.push(contest.end_time_unix);\n  return ret;\n};\n\nexport const getDatetimeTickFormatter = (\n  contest: Contest\n): ((time_unix: number) => string) => {\n  const contestDurationHours =\n    (contest.end_time_unix - contest.start_time_unix) / 3600;\n  let format = '';\n  if (contestDurationHours <= 12) {\n    format = 'HH:MM'; // 12 時間以内なら 1 時間ごとに\n  } else if (contestDurationHours <= 24) {\n    format = 'HH:MM'; // 24 時間以内なら 2 時間ごとに\n  } else if (contestDurationHours <= 24 * 3) {\n    format = 'mm/dd HH:MM'; // 3 日以内なら 6 時間ごとに\n  } else {\n    format = 'mm/dd'; // 1 日ごと\n  }\n  return (time_unix: number) => dataFormat(new Date(time_unix * 1000), format);\n};\n\nexport const scoreTickFormatter = (score: number): string => {\n  let curScore = score;\n  let digitlen = 0;\n  while (curScore >= 10) {\n    curScore /= 10;\n    digitlen++;\n  }\n  return `${curScore.toFixed(1)}e${digitlen}`;\n};\n\nexport const chartLineColors = [\n  '#1F77B4',\n  '#FF7F0E',\n  '#2CA02C',\n  '#D62728',\n  '#9467BD',\n  '#8C564B',\n  '#E377C2',\n  '#7D7F7F',\n  '#BCBD22',\n  '#17BECF',\n];\nexport const getChartLineColor = (index: number): string =>\n  chartLineColors[index % chartLineColors.length];\n\nexport const getRankTicks = (ma: number): number[] => {\n  const ret: number[] = [0];\n  let d = Math.pow(10, Math.floor(Math.log10(ma) - 0.1));\n  let ma0 = d * Math.ceil(ma / d);\n  if (ma0 / d < 3) {\n    d /= 5;\n    ma0 = d * Math.ceil(ma / d);\n  }\n  if (ma0 / d < 5) {\n    d /= 2;\n    ma0 = d * Math.ceil(ma / d);\n  }\n  let cur = 0;\n  while (cur < ma0) {\n    cur += d;\n    ret.push(cur);\n  }\n  return ret;\n};\n","export const RatingColors = [\n  'Black',\n  'Grey',\n  'Brown',\n  'Green',\n  'Cyan',\n  'Blue',\n  'Yellow',\n  'Orange',\n  'Red',\n] as const;\n\nexport type RatingColor = typeof RatingColors[number];\nexport const getRatingColor = (rating: number): RatingColor => {\n  const index = Math.min(Math.floor(rating / 400), RatingColors.length - 2);\n  return RatingColors[index + 1];\n};\nexport const getRatingColorCode = (ratingColor: RatingColor): string => {\n  switch (ratingColor) {\n    case 'Black':\n      return '#000000'; // black\n    case 'Grey':\n      return '#808080'; // grey\n    case 'Brown':\n      return '#804000'; // brown\n    case 'Green':\n      return '#008000'; // green\n    case 'Cyan':\n      return '#00C0C0'; // cyan\n    case 'Blue':\n      return '#0000FF'; // blue\n    case 'Yellow':\n      return '#C0C000'; // yellow\n    case 'Orange':\n      return '#FF8000'; // orange\n    case 'Red':\n      return '#FF0000'; // red\n  }\n};\n\nexport type RatingColorClassName =\n  | 'difficulty-black'\n  | 'difficulty-grey'\n  | 'difficulty-brown'\n  | 'difficulty-green'\n  | 'difficulty-cyan'\n  | 'difficulty-blue'\n  | 'difficulty-yellow'\n  | 'difficulty-orange'\n  | 'difficulty-red';\nexport const getRatingColorClass = (rating: number): RatingColorClassName => {\n  const ratingColor = getRatingColor(rating);\n  switch (ratingColor) {\n    case 'Black':\n      return 'difficulty-black';\n    case 'Grey':\n      return 'difficulty-grey';\n    case 'Brown':\n      return 'difficulty-brown';\n    case 'Green':\n      return 'difficulty-green';\n    case 'Cyan':\n      return 'difficulty-cyan';\n    case 'Blue':\n      return 'difficulty-blue';\n    case 'Yellow':\n      return 'difficulty-yellow';\n    case 'Orange':\n      return 'difficulty-orange';\n    case 'Red':\n      return 'difficulty-red';\n  }\n};\n","import React from 'react';\nimport { RankChartData } from '../../utils/RankReproducer';\n\ninterface Props {\n  index?: number;\n  offset?: number;\n  position?: string;\n  value?: number;\n  viewBox?: {\n    height: number;\n    width: number;\n    x: number;\n    y: number;\n  };\n  x?: number;\n  y?: number;\n  color: string;\n  rankChartDataSequence: RankChartData[];\n  getText: (data: RankChartData) => string;\n  chartId: string;\n}\n\nexport const LineChartLabel: React.FC<Props> = (props) => {\n  const { index, x, y, color, rankChartDataSequence, getText, chartId } = props;\n  if (index === undefined) return <></>;\n  if (x === undefined || y === undefined) return <></>;\n  const data: RankChartData = rankChartDataSequence[index];\n  if (data.type !== 'update') return <></>;\n  const fontSize = 14;\n  const offset = 10;\n  const text = getText(data);\n  const colorFillId = `solid-${chartId}-${data.user}-${index}-color`;\n  return (\n    <g>\n      <defs>\n        <filter id={colorFillId} x=\"-0.05\" y=\"-0.07\" width=\"1.1\" height=\"1.1\">\n          <feFlood floodColor={color} floodOpacity=\"0.8\" />\n          <feComposite operator=\"over\" in=\"SourceGraphic\" />\n        </filter>\n      </defs>\n      <text\n        filter={`url(#${colorFillId})`}\n        x={x}\n        y={y - offset}\n        fontSize={fontSize}\n        fill=\"none\"\n      >\n        {text}\n      </text>\n      <text x={x} y={y - offset} fontSize={fontSize} fill=\"white\">\n        {text}\n      </text>\n    </g>\n  );\n};\n","import React from 'react';\nimport dataFormat from 'dateformat';\nimport { RankChartData } from '../../utils/RankReproducer';\nimport Perfs from '../../interfaces/Perfs';\nimport { getRatingColorClass } from '../../utils/RatingColor';\n\ninterface RankLineChartTooltipPayloadContainer {\n  color: string;\n  dataKey: string; // rank\n  fill: string;\n  name: string; // atcoder user name\n  stroke: string;\n  strokeWidth: number;\n  value: number;\n  payload: RankChartData;\n}\n\ninterface Props {\n  active?: boolean;\n  payload?: RankLineChartTooltipPayloadContainer[];\n  label?: number;\n  perfs?: Perfs;\n}\n\nconst toCorrectedRating = (realRating: number): number => {\n  if (realRating >= 400) return realRating;\n  else return Math.floor(400 / Math.exp((400 - realRating) / 400));\n};\n\nexport const LineChartTooltip: React.FC<Props> = (props) => {\n  const { active, payload, label, perfs } = props;\n  if (!active || payload === undefined || label === undefined) return <></>;\n  return (\n    <div\n      className=\"recharts-default-tooltip\"\n      style={{\n        margin: '0px',\n        padding: '10px',\n        backgroundColor: 'rgb(255, 255, 255)',\n        border: '1px solid rgb(204, 204, 204)',\n        whiteSpace: 'nowrap',\n      }}\n    >\n      <p className=\"recharts-tooltip-label\" style={{ margin: '0px' }}>\n        {dataFormat(new Date(label * 1000), 'yyyy-mm-dd HH:MM:ss')}\n      </p>\n      {payload\n        .map((payloadContainer: RankLineChartTooltipPayloadContainer) => {\n          const curPayload: RankChartData = payloadContainer.payload;\n          if (\n            payloadContainer.name !== curPayload.user ||\n            label !== curPayload.time_unix\n          ) {\n            return undefined;\n          }\n          const correctedPerf = perfs\n            ? toCorrectedRating(perfs.perfs[curPayload.rank - 1])\n            : 0;\n          return (\n            <div key={payloadContainer.name}>\n              <hr style={{ marginTop: '0.3em', marginBottom: '0.3em' }} />\n              <div\n                style={{ color: payloadContainer.stroke }}\n              >{`User: ${payloadContainer.name}`}</div>\n              <ul\n                className=\"recharts-tooltip-item-list\"\n                style={{ padding: '0px', margin: '0px' }}\n              >\n                <li\n                  className=\"recharts-tooltip-item\"\n                  style={{\n                    display: 'block',\n                    paddingTop: '4px',\n                    paddingBottom: '4px',\n                    color: 'rgb(136, 132, 216)',\n                  }}\n                >\n                  <span className=\"recharts-tooltip-item-name\">Rank</span>\n                  <span className=\"recharts-tooltip-item-separator\"> : </span>\n                  <span className=\"recharts-tooltip-item-value\">\n                    {curPayload.rank}\n                  </span>\n                  <span className=\"recharts-tooltip-item-unit\" />\n                </li>\n                {perfs && (\n                  <li\n                    className=\"recharts-tooltip-item\"\n                    style={{\n                      display: 'block',\n                      paddingTop: '0px',\n                      paddingBottom: '4px',\n                      color: 'rgb(136, 132, 216)',\n                    }}\n                  >\n                    <span className=\"recharts-tooltip-item-name\">\n                      Performance\n                    </span>\n                    <span className=\"recharts-tooltip-item-separator\"> : </span>\n                    <span\n                      className={`recharts-tooltip-item-value ${getRatingColorClass(\n                        correctedPerf\n                      )}`}\n                    >\n                      {correctedPerf}\n                    </span>\n                    <span className=\"recharts-tooltip-item-unit\" />\n                  </li>\n                )}\n              </ul>\n              <div style={{ fontSize: 10 }}>\n                {curPayload.type === 'update' ? (\n                  <>\n                    <div>得点を更新しました:</div>\n                    <div>\n                      <span style={{ color: payloadContainer.stroke }}>\n                        {curPayload.oldScore}\n                      </span>\n                      {' → '}\n                      <span style={{ color: payloadContainer.stroke }}>\n                        {curPayload.score}\n                      </span>\n                    </div>\n                    <div>{`(${curPayload.task} ${curPayload.status})`}</div>\n                  </>\n                ) : (\n                  <>\n                    <div>{`${\n                      curPayload.overtakeUserName ?? ''\n                    } さんに追い抜かれました:`}</div>\n                    <div>\n                      {`${payloadContainer.name}: `}\n                      <span style={{ color: payloadContainer.stroke }}>\n                        {curPayload.score}\n                      </span>\n                    </div>\n                    <div>{`${curPayload.overtakeUserName ?? ''}: ${\n                      curPayload.overtakeUserOldScore ?? ''\n                    } → ${curPayload.overtakeUserNewScore ?? ''}`}</div>\n                    <div\n                      style={{ marginLeft: '1em' }}\n                    >{`(${curPayload.task} ${curPayload.status})`}</div>\n                  </>\n                )}\n              </div>\n            </div>\n          );\n        })\n        .filter((element) => element !== undefined)}\n    </div>\n  );\n};\n","import React from 'react';\nimport {\n  LineChart,\n  Line,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  Tooltip,\n  Legend,\n  ResponsiveContainer,\n  Label,\n  LabelList,\n  ReferenceArea,\n} from 'recharts';\nimport Contest from '../../interfaces/Contest';\nimport Perfs from '../../interfaces/Perfs';\nimport { ordinalSuffixOf } from '../../utils';\nimport {\n  getChartLineColor,\n  getDatetimeTickFormatter,\n  getDatetimeTicks,\n  getRankTicks,\n} from '../../utils/Chart';\nimport { RankChartData } from '../../utils/RankReproducer';\nimport { getRatingColorCode, RatingColors } from '../../utils/RatingColor';\nimport { LineChartLabel } from './LineChartLabel';\nimport { LineChartTooltip } from './LineChartTooltip';\n\ninterface Props {\n  sequences: [string, RankChartData[]][];\n  contest: Contest;\n  showDots: boolean;\n  showACLabels: boolean;\n  perfs?: Perfs;\n}\n\nexport const RankLineChart: React.FC<Props> = (props) => {\n  const { sequences, contest, showDots, showACLabels, perfs } = props;\n\n  const maxRank = sequences.reduce(\n    (ma: number, curValue: [string, RankChartData[]]): number => {\n      return curValue[1].reduce(\n        (ma_: number, curValue_: RankChartData): number => {\n          return Math.max(ma_, curValue_.rank);\n        },\n        ma\n      );\n    },\n    1\n  );\n\n  const rankTicks = getRankTicks(maxRank);\n  const maxRankForChart = rankTicks[rankTicks.length - 1];\n\n  return (\n    <div style={{ width: '100%', height: '500px', marginTop: '50px' }}>\n      <ResponsiveContainer>\n        <LineChart\n          width={1000}\n          height={500}\n          margin={{\n            top: 20,\n            right: 20,\n            bottom: 20,\n            left: 20,\n          }}\n        >\n          {perfs &&\n            [...perfs.borders, 0].map((top, index) => {\n              const bottom: number =\n                index === 0\n                  ? maxRankForChart\n                  : Math.min(maxRankForChart, perfs.borders[index - 1]);\n              if (bottom < top) return null;\n              const color: string = getRatingColorCode(RatingColors[index + 1]);\n              return (\n                <ReferenceArea\n                  x1={contest.start_time_unix}\n                  x2={contest.end_time_unix}\n                  y1={bottom}\n                  y2={top}\n                  fill={color}\n                  key={index}\n                  isFront={false}\n                  opacity={0.3}\n                />\n              );\n            })}\n          <CartesianGrid strokeDasharray=\"3 3\" />\n          <XAxis\n            type=\"number\"\n            dataKey=\"time_unix\"\n            name=\"unixtime\"\n            domain={[contest.start_time_unix, contest.end_time_unix]}\n            tickFormatter={getDatetimeTickFormatter(contest)}\n            ticks={getDatetimeTicks(contest)}\n          >\n            <Label value=\"Datetime\" offset={0} position=\"insideBottom\" />\n          </XAxis>\n          <YAxis\n            type=\"number\"\n            name=\"rank\"\n            label={{ value: 'Rank', angle: -90, position: 'insideLeft' }}\n            reversed\n            domain={[0, maxRankForChart]}\n            ticks={rankTicks}\n          />\n          <Tooltip content={<LineChartTooltip perfs={perfs} />} />\n          <Legend />\n          {sequences.map((entry: [string, RankChartData[]], index: number) => {\n            const [user, seq] = entry;\n            const color = getChartLineColor(index);\n            return (\n              <Line\n                key={user}\n                data={seq}\n                name={user}\n                dataKey=\"rank\"\n                type=\"stepAfter\"\n                stroke={color}\n                dot={showDots && { fillOpacity: 0.2, strokeWidth: 1 }}\n              >\n                {showACLabels && (\n                  <LabelList\n                    dataKey=\"label\"\n                    position=\"top\"\n                    content={\n                      <LineChartLabel\n                        color={color}\n                        rankChartDataSequence={seq}\n                        getText={(data: RankChartData): string =>\n                          `${data.rank}${ordinalSuffixOf(data.rank)}`\n                        }\n                        chartId=\"rank\"\n                      />\n                    }\n                  />\n                )}\n              </Line>\n            );\n          })}\n        </LineChart>\n      </ResponsiveContainer>\n    </div>\n  );\n};\n","import React from 'react';\nimport {\n  LineChart,\n  Line,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  Tooltip,\n  Legend,\n  ResponsiveContainer,\n  Label,\n  LabelList,\n} from 'recharts';\nimport Contest from '../../interfaces/Contest';\nimport {\n  getChartLineColor,\n  getDatetimeTickFormatter,\n  getDatetimeTicks,\n  scoreTickFormatter,\n} from '../../utils/Chart';\nimport { RankChartData } from '../../utils/RankReproducer';\nimport { LineChartLabel } from './LineChartLabel';\nimport { LineChartTooltip } from './LineChartTooltip';\n\ninterface Props {\n  sequences: [string, RankChartData[]][];\n  contest: Contest;\n  showDots: boolean;\n  showACLabels: boolean;\n}\n\nexport const ScoreLineChart: React.FC<Props> = (props) => {\n  const { sequences, contest, showDots, showACLabels } = props;\n\n  const scoreUpdateSequences: [\n    string,\n    RankChartData[]\n  ][] = sequences.map(([user, rankChartDataSequence]): [\n    string,\n    RankChartData[]\n  ] => [\n    user,\n    rankChartDataSequence.filter(\n      (rankChartData) => rankChartData.type === 'update'\n    ),\n  ]);\n\n  return (\n    <div style={{ width: '100%', height: '500px', marginTop: '50px' }}>\n      <ResponsiveContainer>\n        <LineChart\n          width={1000}\n          height={500}\n          margin={{\n            top: 20,\n            right: 20,\n            bottom: 20,\n            left: 20,\n          }}\n        >\n          <CartesianGrid strokeDasharray=\"3 3\" />\n          <XAxis\n            type=\"number\"\n            dataKey=\"time_unix\"\n            name=\"unixtime\"\n            domain={[contest.start_time_unix, contest.end_time_unix]}\n            tickFormatter={getDatetimeTickFormatter(contest)}\n            ticks={getDatetimeTicks(contest)}\n          >\n            <Label value=\"Datetime\" offset={0} position=\"insideBottom\" />\n          </XAxis>\n          <YAxis\n            type=\"number\"\n            name=\"score\"\n            label={{ value: 'Score', angle: -90, position: 'insideLeft' }}\n            tickFormatter={scoreTickFormatter}\n          />\n          <Tooltip content={<LineChartTooltip />} />\n          <Legend />\n          {scoreUpdateSequences.map(\n            (entry: [string, RankChartData[]], index: number) => {\n              const [user, seq] = entry;\n              const color = getChartLineColor(index);\n              return (\n                <Line\n                  key={user}\n                  data={seq}\n                  name={user}\n                  dataKey=\"score\"\n                  type=\"stepAfter\"\n                  stroke={color}\n                  dot={showDots && { fillOpacity: 0.2, strokeWidth: 1 }}\n                >\n                  {showACLabels && (\n                    <LabelList\n                      dataKey=\"label\"\n                      position=\"top\"\n                      content={\n                        <LineChartLabel\n                          color={color}\n                          rankChartDataSequence={seq}\n                          getText={(data: RankChartData): string =>\n                            `${data.score}`\n                          }\n                          chartId=\"score\"\n                        />\n                      }\n                    />\n                  )}\n                </Line>\n              );\n            }\n          )}\n        </LineChart>\n      </ResponsiveContainer>\n    </div>\n  );\n};\n","import Contest from '../interfaces/Contest';\nimport Task from '../interfaces/Task';\nimport Submission from '../interfaces/Submission';\nimport Perfs from '../interfaces/Perfs';\n\nconst CONTEST_SUBMISSION_MAP: Map<string, Submission[]> = new Map<\n  string,\n  Submission[]\n>();\nexport const fetchContestSubmissions = async (\n  contest?: string\n): Promise<Submission[]> =>\n  contest !== undefined && contest.length > 0\n    ? !CONTEST_SUBMISSION_MAP.has(contest)\n      ? fetch(`${process.env.PUBLIC_URL}/submissions/${contest}.json`)\n          .catch((e) => {\n            throw Error(e);\n          })\n          .then(async (r) => {\n            const submissions = (await r.json()) as Submission[];\n            CONTEST_SUBMISSION_MAP.set(contest, submissions);\n            return submissions;\n          })\n      : Promise.resolve(CONTEST_SUBMISSION_MAP.get(contest) as Submission[])\n    : Promise.resolve([]);\n\nconst CONTEST_TASK_MAP: Map<string, Task[]> = new Map<string, Task[]>();\nexport const fetchContestTasks = async (contest?: string): Promise<Task[]> =>\n  contest !== undefined && contest.length > 0\n    ? !CONTEST_TASK_MAP.has(contest)\n      ? fetch(`${process.env.PUBLIC_URL}/tasks/${contest}.json`)\n          .catch((e) => {\n            throw Error(e);\n          })\n          .then(async (r) => {\n            const tasks = (await r.json()) as Task[];\n            CONTEST_TASK_MAP.set(contest, tasks);\n            return tasks;\n          })\n      : Promise.resolve(CONTEST_TASK_MAP.get(contest) as Task[])\n    : Promise.resolve([]);\n\nlet CONTESTS: Contest[] | undefined = undefined;\nexport const fetchContests = async (): Promise<Contest[]> =>\n  CONTESTS === undefined\n    ? fetch(`${process.env.PUBLIC_URL}/contests/contests.json`)\n        .catch((e) => {\n          throw Error(e);\n        })\n        .then(async (r) => {\n          CONTESTS = (await r.json()) as Contest[];\n          return CONTESTS;\n        })\n    : Promise.resolve(CONTESTS);\n\nconst PERF_MAP: Map<string, Perfs> = new Map<string, Perfs>();\nexport const fetchPerfs = async (\n  contestSlug: string,\n  contest: Contest | undefined\n): Promise<Perfs | undefined> =>\n  contestSlug !== undefined && contestSlug.length > 0 && contest !== undefined\n    ? !PERF_MAP.has(contestSlug)\n      ? fetch(`${process.env.PUBLIC_URL}/perfs/${contestSlug}.json`)\n          .catch((e) => {\n            throw Error(e);\n          })\n          .then(async (r) => {\n            const submissions = (await r.json()) as Perfs;\n            PERF_MAP.set(contestSlug, submissions);\n            return submissions;\n          })\n      : Promise.resolve(PERF_MAP.get(contestSlug) as Perfs)\n    : Promise.resolve(undefined);\n","import React from 'react';\nimport useSWR from 'swr';\nimport { Alert } from 'reactstrap';\nimport { FormBlock } from './FormBlock';\nimport { ChartBlock } from './ChartBlock';\nimport {\n  fetchContests,\n  fetchContestSubmissions,\n  fetchPerfs,\n} from '../../utils/Data';\nimport Contest from '../../interfaces/Contest';\nimport Submission from '../../interfaces/Submission';\nimport Perfs from '../../interfaces/Perfs';\n\ninterface Props {\n  match: {\n    params: {\n      contest: string;\n      user: string;\n    };\n  };\n}\n\nexport const ChartPage: React.FC<Props> = (props) => {\n  const paramContest: string = props.match.params.contest ?? '';\n  const paramUser: string = props.match.params.user ?? '';\n\n  const { data: contests, error: contestsError } = useSWR<Contest[], Error>(\n    '/contests/contests',\n    fetchContests\n  );\n\n  const { data: contestSubmissions, error: contestSubmissionsError } = useSWR<\n    Submission[],\n    Error\n  >(\n    paramUser.length > 0 && paramContest.length > 0\n      ? `/submissions/${paramContest}`\n      : null,\n    () => {\n      return fetchContestSubmissions(paramContest);\n    }\n  );\n\n  const { data: perfs, error: perfsError } = useSWR<Perfs | undefined, Error>(\n    paramUser.length > 0 && paramContest.length > 0 && contests !== undefined\n      ? `/perfs/${paramContest}`\n      : null,\n    () => {\n      const tmpContest: Contest | undefined = contests?.find(\n        (value) => value.contest_slug === paramContest\n      );\n      return fetchPerfs(paramContest, tmpContest);\n    }\n  );\n\n  const users = paramUser\n    .split(',')\n    .map((_user) => _user.trim())\n    .filter((_user) => _user !== '');\n\n  const contestMap = contests?.reduce(\n    (prevMap: Map<string, Contest>, contest: Contest): Map<string, Contest> =>\n      prevMap.set(contest.contest_slug, contest),\n    new Map<string, Contest>()\n  );\n  return (\n    <>\n      <h2>Description</h2>\n      <p>\n        AtCoder\n        で行われたマラソンコンテストにおける順位および得点の推移をグラフに表示します．\n      </p>\n      <p>\n        <a\n          href=\"https://atcoder-replay.kakira.dev/\"\n          target=\"_blank\"\n          rel=\"noreferrer\"\n        >\n          AtCoder Replay (β)\n        </a>{' '}\n        がマラソンに対応していなかったので作りました．\n      </p>\n      <p>\n        順位表をリプレイする場合は，ページ上部ナビゲーションバーの「Standings」から．\n      </p>\n\n      <h2>Let&apos;s Replay!</h2>\n      {contestsError ? (\n        <Alert\n          color=\"danger\"\n          style={{\n            marginTop: '50px',\n            marginBottom: '50px',\n          }}\n        >\n          Failed to fetch contest list.\n        </Alert>\n      ) : contests === undefined ? (\n        <div\n          style={{\n            width: '100%',\n            height: '500px',\n            textAlign: 'center',\n            marginTop: '100px',\n            marginBottom: '100px',\n          }}\n        >\n          Fetch contest data...\n        </div>\n      ) : (\n        <FormBlock\n          paramUsers={paramUser}\n          paramContest={paramContest}\n          contests={contests}\n        />\n      )}\n\n      {paramUser.length === 0 ? (\n        <div style={{ height: '50px' }}></div>\n      ) : contestSubmissionsError ? (\n        <Alert\n          color=\"danger\"\n          style={{\n            marginTop: '50px',\n            marginBottom: '50px',\n          }}\n        >\n          Failed to fetch contest submission list.\n        </Alert>\n      ) : contestSubmissions === undefined ? (\n        <div\n          style={{\n            width: '100%',\n            height: '500px',\n            textAlign: 'center',\n            marginTop: '100px',\n            marginBottom: '100px',\n          }}\n        >\n          Fetch contest submissions data...\n        </div>\n      ) : (\n        <ChartBlock\n          users={users}\n          contest={contestMap?.get(paramContest)}\n          contestSubmissions={contestSubmissions}\n          perfs={perfsError ? undefined : perfs}\n        />\n      )}\n    </>\n  );\n};\n","import React, { useState, useMemo, useEffect } from 'react';\nimport { NavLink } from 'react-router-dom';\nimport { Button, Input, Row, FormGroup, Label, Col } from 'reactstrap';\nimport DatePicker from 'react-datepicker';\nimport 'react-datepicker/dist/react-datepicker.css';\nimport dataFormat from 'dateformat';\nimport Contest from '../../interfaces/Contest';\nimport { formatElapsedSec } from '../../utils';\n\ninterface Props {\n  paramContest: string;\n  contests: Contest[];\n  contestMap?: Map<string, Contest>;\n  parsedDatetime?: Date;\n}\n\nconst generatePath = (contest: string, cursorDate: Date): string =>\n  `/standings/${contest}/${dataFormat(cursorDate, \"yyyy-mm-dd'T'HH:MM:sso\")}`;\nconst getContestDropdownLabel = (contest: Contest): string =>\n  `${dataFormat(new Date(contest.start_time_unix * 1000), 'yyyy-mm-dd')} ${\n    contest.contest_name\n  }`;\n\nexport const FormBlock: React.FC<Props> = (props) => {\n  const { paramContest, contests, contestMap, parsedDatetime } = props;\n  const [contest, setContest] = useState(\n    paramContest !== ''\n      ? paramContest\n      : contests.length > 0\n      ? contests[0].contest_slug\n      : ''\n  );\n  const [cursorDate, setCursorDate] = useState(\n    parsedDatetime !== undefined\n      ? parsedDatetime\n      : contests.length > 0\n      ? new Date(contests[0].end_time_unix * 1000)\n      : new Date()\n  );\n  const standingsPagePath = useMemo(() => generatePath(contest, cursorDate), [\n    contest,\n    cursorDate,\n  ]);\n\n  useEffect(() => {\n    let unmounted = false;\n    const setDefaultContestValue = () => {\n      if (!unmounted && contests.length > 0 && contest === '') {\n        setContest(contests[0].contest_slug);\n        if (parsedDatetime === undefined) {\n          setCursorDate(new Date(contests[0].end_time_unix * 1000));\n        }\n      }\n    };\n    void setDefaultContestValue();\n    const cleanup = () => {\n      unmounted = true;\n    };\n    return cleanup;\n  }, [contests]);\n\n  const _contest: Contest | undefined = contestMap?.get(contest);\n\n  return (\n    <>\n      <Row>\n        <Col sm={12}>\n          <FormGroup style={{ width: '100%' }}>\n            <Label for=\"input-contest\">CONTEST:</Label>\n            <Input\n              type=\"select\"\n              name=\"input-contest\"\n              id=\"input-contest\"\n              value={contest}\n              onChange={(e): void => {\n                setContest(e.target.value);\n                const _contest: Contest | undefined = contestMap?.get(\n                  e.target.value\n                );\n                if (_contest !== undefined) {\n                  const lb = new Date(_contest.start_time_unix * 1000);\n                  const ub = new Date(_contest.end_time_unix * 1000);\n                  if (cursorDate < lb || ub < cursorDate) {\n                    setCursorDate(ub);\n                  }\n                }\n              }}\n            >\n              {contests.map((_contest: Contest) => {\n                return (\n                  <option\n                    value={_contest.contest_slug}\n                    key={_contest.contest_slug}\n                  >\n                    {getContestDropdownLabel(_contest)}\n                  </option>\n                );\n              })}\n            </Input>\n            {_contest && (\n              <div\n                className=\"contest-duration\"\n                style={{\n                  color: '#666',\n                  fontSize: 'small',\n                  margin: '0.2rem',\n                  marginLeft: '1rem',\n                }}\n              >{`Duration: ${dataFormat(\n                new Date(_contest.start_time_unix * 1000),\n                'yyyy-mm-dd(ddd) HH:MMo'\n              )} ~ ${dataFormat(\n                new Date(_contest.end_time_unix * 1000),\n                'yyyy-mm-dd(ddd) HH:MMo'\n              )} (${formatElapsedSec(\n                _contest.end_time_unix - _contest.start_time_unix\n              )})`}</div>\n            )}\n          </FormGroup>\n        </Col>\n      </Row>\n      <Row>\n        <Col sm={12}>\n          <FormGroup style={{ width: '100%' }}>\n            <div>\n              <Label for=\"input-datetime\">DATETIME:</Label>\n            </div>\n            <DatePicker\n              showTimeSelect\n              dateFormat=\"yyyy-MM-dd HH:mm:ss\"\n              timeFormat=\"HH:mm\"\n              selected={cursorDate}\n              onChange={(date: Date) => setCursorDate(date)}\n              customInput={\n                <Input\n                  value={dataFormat(cursorDate, 'yyyy-mm-dd HH:MM:ss')}\n                  type=\"text\"\n                  name=\"input-datetime\"\n                  id=\"input-datetime\"\n                />\n              }\n              minDate={\n                _contest ? new Date(_contest.start_time_unix * 1000) : undefined\n              }\n              maxDate={\n                _contest ? new Date(_contest.end_time_unix * 1000) : undefined\n              }\n              filterTime={(date: Date): boolean => {\n                if (_contest === undefined) return true;\n                return (\n                  new Date(_contest.start_time_unix * 1000) <= date &&\n                  date <= new Date(_contest.end_time_unix * 1000)\n                );\n              }}\n            />\n            {_contest && (\n              <div\n                className=\"contest-duration\"\n                style={{\n                  color: '#666',\n                  fontSize: 'small',\n                  margin: '0.2rem',\n                  marginLeft: '1rem',\n                }}\n              >{`Elapsed: ${formatElapsedSec(\n                Math.floor(cursorDate.getTime() / 1000) -\n                  _contest.start_time_unix\n              )}`}</div>\n            )}\n          </FormGroup>\n        </Col>\n      </Row>\n      <Row>\n        <Col sm={12}>\n          <Button color=\"primary\" tag={NavLink} to={standingsPagePath} block>\n            Replay !\n          </Button>\n        </Col>\n      </Row>\n    </>\n  );\n};\n","import React from 'react';\nimport { PaginationOptions } from 'react-bootstrap-table-next';\nimport {\n  Col,\n  Pagination,\n  PaginationItem,\n  PaginationLink,\n  Row,\n} from 'reactstrap';\nimport { range } from '../utils';\nimport './pagination-panel.scss';\n\nconst pageList = (\n  currPage: number,\n  pageStartIndex: number,\n  totalPages: number\n): number[] => {\n  if (totalPages === 0) {\n    return [];\n  }\n  if (totalPages <= 10) {\n    return range(1, totalPages);\n  }\n\n  const pageNumbers = [currPage];\n  let tmpExp = 1;\n  for (;;) {\n    tmpExp *= 2;\n    const tmpPageNumber = currPage - tmpExp + 1;\n    if (tmpPageNumber < pageStartIndex) {\n      break;\n    }\n    pageNumbers.unshift(tmpPageNumber);\n  }\n  if (pageNumbers[0] !== pageStartIndex) {\n    pageNumbers.unshift(pageStartIndex);\n  }\n\n  tmpExp = 1;\n  for (;;) {\n    tmpExp *= 2;\n    const tmpPageNumber = currPage + tmpExp - 1;\n    if (tmpPageNumber > totalPages) {\n      break;\n    }\n    pageNumbers.push(tmpPageNumber);\n  }\n  if (pageNumbers.slice(-1)[0] !== totalPages) {\n    pageNumbers.push(totalPages);\n  }\n\n  return pageNumbers;\n};\n\ninterface PaginationChildProps extends PaginationOptions {\n  tableId?: string;\n  bootstrap4?: boolean;\n}\n\ninterface PaginationPanelProps extends PaginationChildProps {\n  renderSizePerPage: boolean;\n}\n\nexport const PaginationPanel: React.FC<PaginationPanelProps> = (props) => {\n  const {\n    renderSizePerPage,\n    totalSize,\n    sizePerPage,\n    sizePerPageList,\n    onSizePerPageChange,\n    page,\n    pageStartIndex,\n    onPageChange,\n  } = props;\n  if (\n    page === undefined ||\n    pageStartIndex === undefined ||\n    onPageChange === undefined ||\n    totalSize === undefined ||\n    sizePerPage === undefined ||\n    sizePerPageList === undefined ||\n    onSizePerPageChange === undefined\n  )\n    return null;\n  const totalPages = Math.ceil(totalSize / sizePerPage);\n  const pageNumbers = pageList(page, pageStartIndex, totalPages);\n\n  return (\n    <div className=\"pagination-panel-parent\">\n      {renderSizePerPage && (\n        <>\n          <Row>\n            <Col className=\"size-per-page\">\n              <span className=\"small\">\n                {'per page: '}\n                {(sizePerPageList as number[]).map((p) => (\n                  <a\n                    key={p}\n                    className={`standings-per-page${\n                      p === sizePerPage ? ' active' : ''\n                    }`}\n                    onClick={() => onSizePerPageChange(p, 1)}\n                  >\n                    {p}\n                  </a>\n                ))}\n              </span>\n            </Col>\n          </Row>\n          <hr className=\"size-per-page-splitter\" />\n        </>\n      )}\n      <Row>\n        <Col>\n          <Pagination\n            className=\"pagination-sm\"\n            style={{ flexWrap: 'wrap', justifyContent: 'center' }}\n          >\n            {pageNumbers.map((pageNumber) => (\n              <PaginationItem key={pageNumber} active={pageNumber === page}>\n                <PaginationLink\n                  onClick={() => onPageChange(pageNumber, sizePerPage)}\n                >\n                  {pageNumber}\n                </PaginationLink>\n              </PaginationItem>\n            ))}\n          </Pagination>\n        </Col>\n      </Row>\n    </div>\n  );\n};\n","import React from 'react';\nimport { UncontrolledTooltip } from 'reactstrap';\nimport BootstrapTable, {\n  ColumnDescription,\n  SortOrder,\n} from 'react-bootstrap-table-next';\nimport paginationFactory, {\n  PaginationProvider,\n} from 'react-bootstrap-table2-paginator';\nimport filterFactory, { textFilter } from 'react-bootstrap-table2-filter';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport {\n  faSort,\n  faSortDown,\n  faSortUp,\n  faSearch,\n} from '@fortawesome/free-solid-svg-icons';\nimport { TwitterIcon, TwitterShareButton } from 'react-share';\nimport dataFormat from 'dateformat';\nimport { PaginationPanel } from '../../components/PaginationPanel';\nimport { formatScore, formatElapsedSec } from '../../utils';\nimport Contest from '../../interfaces/Contest';\nimport Submission from '../../interfaces/Submission';\nimport Task from '../../interfaces/Task';\nimport './standings-table.css';\n\ninterface UserStandingsTaskEntry {\n  score: number;\n  score_time: number;\n  submit_count: number; // CE 以外の提出回数\n  submit_count_ce: number;\n}\n\ninterface UserStandingsEntry extends UserStandingsTaskEntry {\n  user_name: string;\n  rank: number;\n  tasks: Map<string, UserStandingsTaskEntry>; // 問題ごとの得点\n}\n\nconst compareUserStandingsTaskEntry = (\n  a: UserStandingsTaskEntry,\n  b: UserStandingsTaskEntry\n): number => {\n  // スコアが高いほうが順位が上\n  if (a.score != b.score) return b.score - a.score;\n  if (a.score > 0) {\n    // 正の得点同士なら\n    if (a.score_time != b.score_time) return a.score_time - b.score_time;\n    return a.submit_count - b.submit_count;\n  } else {\n    // 0 点同士なら\n    return 0;\n  }\n};\n\nconst _sortCaret = (order: 'asc' | 'desc' | undefined): JSX.Element => {\n  if (order === 'asc')\n    return (\n      <FontAwesomeIcon\n        style={{\n          marginLeft: '6px',\n          marginTop: '0.2rem',\n          marginBottom: '-0.2rem',\n        }}\n        icon={faSortUp}\n      />\n    );\n  if (order === 'desc')\n    return (\n      <FontAwesomeIcon\n        style={{\n          marginLeft: '6px',\n          marginTop: '-0.2rem',\n          marginBottom: '0.2rem',\n        }}\n        icon={faSortDown}\n      />\n    );\n  return <FontAwesomeIcon style={{ marginLeft: '6px' }} icon={faSort} />;\n};\n\ninterface Props {\n  contest?: Contest;\n  contestSubmissions: Submission[];\n  contestTasks: Task[];\n  parsedDatetime: Date;\n}\n\nexport const StandingsTable: React.FC<Props> = (props) => {\n  const { contest, contestSubmissions, contestTasks, parsedDatetime } = props;\n\n  if (contest === undefined) {\n    return <div style={{ height: '50px' }}></div>;\n  }\n  if (contestSubmissions.length === 0 || contestTasks.length === 0) {\n    return (\n      <div\n        style={{\n          width: '100%',\n          height: '500px',\n          textAlign: 'center',\n          marginTop: '100px',\n          marginBottom: '100px',\n        }}\n      >\n        Fetch data...\n      </div>\n    );\n  }\n\n  // generate standings\n  const userStandingsEntriesMap = new Map<string, UserStandingsEntry>();\n  contestSubmissions.forEach((contestSubmission: Submission): void => {\n    // filter by datetime\n    const curDatetime = new Date(contestSubmission.time_unix * 1000);\n    if (curDatetime > parsedDatetime) return;\n\n    // initialize/get entry\n    let userStandingsEntry: UserStandingsEntry;\n    if (userStandingsEntriesMap.has(contestSubmission.user_name)) {\n      userStandingsEntry = userStandingsEntriesMap.get(\n        contestSubmission.user_name\n      ) as UserStandingsEntry;\n    } else {\n      userStandingsEntry = {\n        user_name: contestSubmission.user_name,\n        score: 0,\n        score_time: 0,\n        submit_count: 0,\n        submit_count_ce: 0,\n        rank: -1,\n        tasks: contestTasks.reduce(\n          (prevMap: Map<string, UserStandingsTaskEntry>, curTask: Task) =>\n            prevMap.set(curTask.task_slug, {\n              score: 0,\n              score_time: 0,\n              submit_count: 0,\n              submit_count_ce: 0,\n            }),\n          new Map<string, UserStandingsTaskEntry>()\n        ),\n      } as UserStandingsEntry;\n      userStandingsEntriesMap.set(\n        contestSubmission.user_name,\n        userStandingsEntry\n      );\n    }\n    // update entry\n    const targetTaskEntry = userStandingsEntry.tasks.get(\n      contestSubmission.task\n    ) as UserStandingsTaskEntry;\n    if (contestSubmission.status == 'CE') {\n      userStandingsEntry.submit_count_ce++;\n      targetTaskEntry.submit_count_ce++;\n    } else {\n      userStandingsEntry.submit_count++;\n      targetTaskEntry.submit_count++;\n    }\n    if (contestSubmission.score > targetTaskEntry.score) {\n      userStandingsEntry.score +=\n        contestSubmission.score - targetTaskEntry.score;\n      userStandingsEntry.score_time = contestSubmission.time_unix;\n      targetTaskEntry.score = contestSubmission.score;\n      targetTaskEntry.score_time = contestSubmission.time_unix;\n    }\n  });\n  const userStandingsEntries: UserStandingsEntry[] = Array.from(\n    userStandingsEntriesMap.values()\n  );\n  userStandingsEntries.sort(compareUserStandingsTaskEntry);\n  userStandingsEntries.reduce((prev, userStandingsEntry, index) => {\n    if (prev === -1) {\n      userStandingsEntry.rank = index + 1;\n      return 0;\n    } else if (\n      userStandingsEntry.score === userStandingsEntries[prev].score &&\n      (userStandingsEntry.score === 0 ||\n        (userStandingsEntry.score_time ===\n          userStandingsEntries[prev].score_time &&\n          userStandingsEntry.submit_count ===\n            userStandingsEntries[prev].submit_count))\n    ) {\n      userStandingsEntry.rank = prev + 1;\n      return prev;\n    } else {\n      userStandingsEntry.rank = index + 1;\n      return index;\n    }\n  }, -1);\n\n  const columns: ColumnDescription[] = [\n    {\n      dataField: 'rank',\n      text: 'Rank',\n      sort: true,\n      classes: 'standings-rank',\n      headerClasses: 'standings-rank-head',\n      sortFunc: function _sortFunc(a: number, b: number, order: SortOrder) {\n        if (order === 'desc') {\n          return a - b;\n        } else {\n          return b - a;\n        }\n      },\n      sortCaret: _sortCaret,\n    },\n    {\n      dataField: 'user_name',\n      text: 'User',\n      sort: true,\n      classes: 'standings-username',\n      headerClasses: 'standings-username-head',\n      filter: textFilter(),\n      formatter: function _formatter(\n        cell: string,\n        _row: UserStandingsEntry,\n        _rowIndex: number,\n        _contest: Contest\n      ) {\n        const btnId = `standings-user-btn-submission-${cell}`;\n        return (\n          <>\n            <a\n              href={`https://atcoder.jp/users/${cell}`}\n              className=\"username\"\n              target=\"_blank\"\n              rel=\"noreferrer noopener\"\n            >\n              <span className=\"user\">{cell}</span>\n            </a>\n            <span className=\"standings-user-btn\">\n              <a\n                href={`https://atcoder.jp/contests/${_contest.contest_slug}/submissions?f.User=${cell}`}\n                id={btnId}\n              >\n                <FontAwesomeIcon icon={faSearch} />\n              </a>\n              <UncontrolledTooltip placement=\"top\" target={btnId}>\n                {`view ${cell}'s submissions`}\n              </UncontrolledTooltip>\n            </span>\n          </>\n        );\n      },\n      formatExtraData: contest,\n      sortFunc: function _sortFunc(a: string, b: string, order: SortOrder) {\n        if (order === 'desc') {\n          return a > b ? 1 : -1;\n        } else {\n          return b < a ? -1 : 1;\n        }\n      },\n      sortCaret: _sortCaret,\n    },\n    {\n      dataField: 'score',\n      text: 'Score',\n      sort: true,\n      classes: 'standings-result',\n      headerClasses: 'standings-result-head',\n      formatter: function _formatter(\n        cell: number,\n        row: UserStandingsEntry,\n        _rowIndex: number,\n        _contest: Contest\n      ) {\n        return (\n          <>\n            <p>\n              {cell > 0 && (\n                <span className=\"standings-score\">{formatScore(cell)}</span>\n              )}\n              {cell <= 0 ? (\n                <span>(0)</span>\n              ) : row.submit_count >= 2 ? (\n                <span className=\"standings-wa\">{` (${\n                  row.submit_count - 1\n                })`}</span>\n              ) : (\n                <></>\n              )}\n            </p>\n            <p>\n              {row.score_time > 0 &&\n                formatElapsedSec(row.score_time - _contest.start_time_unix)}\n            </p>\n          </>\n        );\n      },\n      formatExtraData: contest,\n      sortFunc: function _sortFunc(\n        _a: number,\n        _b: number,\n        order: SortOrder,\n        _dataField: string,\n        rowA: UserStandingsEntry,\n        rowB: UserStandingsEntry\n      ) {\n        if (order === 'desc') {\n          return compareUserStandingsTaskEntry(rowA, rowB);\n        } else {\n          return compareUserStandingsTaskEntry(rowB, rowA);\n        }\n      },\n      sortCaret: _sortCaret,\n    },\n    ...contestTasks.map(\n      (task: Task): ColumnDescription => {\n        return {\n          dataField: `tasks_${task.task_slug}`,\n          isDummyField: true,\n          text: task.label,\n          sort: true,\n          classes: 'standings-result',\n          headerClasses: 'standings-result-head',\n          formatter: function _formatter(\n            _cell: null,\n            row: UserStandingsEntry,\n            _rowIndex: number,\n            formatExtraData: { task: Task; contest: Contest }\n          ) {\n            const { task, contest: _contest } = formatExtraData;\n            const userTaskEntry = row.tasks.get(\n              task.task_slug\n            ) as UserStandingsTaskEntry;\n            return (\n              <>\n                <p>\n                  {userTaskEntry.score > 0 && (\n                    <span className=\"standings-ac\">\n                      {formatScore(userTaskEntry.score)}\n                    </span>\n                  )}\n                  {userTaskEntry.submit_count === 0 &&\n                  userTaskEntry.submit_count_ce > 0 &&\n                  userTaskEntry.score <= 0 ? (\n                    <span>(0)</span>\n                  ) : userTaskEntry.submit_count >= 1 &&\n                    userTaskEntry.score <= 0 ? (\n                    <span className=\"standings-wa\">{` (${userTaskEntry.submit_count})`}</span>\n                  ) : userTaskEntry.submit_count >= 2 ? (\n                    <span className=\"standings-wa\">{` (${\n                      userTaskEntry.submit_count - 1\n                    })`}</span>\n                  ) : (\n                    <></>\n                  )}\n                </p>\n                <p>\n                  {userTaskEntry.score_time > 0 &&\n                    formatElapsedSec(\n                      userTaskEntry.score_time - _contest.start_time_unix\n                    )}\n                </p>\n              </>\n            );\n          },\n          formatExtraData: { task, contest },\n          headerFormatter: function _formatter(\n            column: ColumnDescription,\n            _colIndex: number,\n            components: { sortElement: JSX.Element; filterElement: JSX.Element }\n          ) {\n            return (\n              <>\n                <a\n                  href={`https://atcoder.jp/contests/${task.contest_slug}/tasks/${task.task_slug}`}\n                  target=\"_blank\"\n                  rel=\"noreferrer noopener\"\n                >\n                  {column.text}\n                </a>\n                {components.sortElement}\n              </>\n            );\n          },\n          sortFunc: function _sortFunc(\n            _a: null,\n            _b: null,\n            order: SortOrder,\n            _dataField: string,\n            rowA: UserStandingsEntry,\n            rowB: UserStandingsEntry\n          ) {\n            const entryA = rowA.tasks.get(\n              task.task_slug\n            ) as UserStandingsTaskEntry;\n            const entryB = rowB.tasks.get(\n              task.task_slug\n            ) as UserStandingsTaskEntry;\n            if (order === 'desc') {\n              return compareUserStandingsTaskEntry(entryA, entryB);\n            } else {\n              return compareUserStandingsTaskEntry(entryB, entryA);\n            }\n          },\n          sortCaret: _sortCaret,\n        };\n      }\n    ), // end map\n  ];\n\n  let maxRankText = '';\n  if (userStandingsEntries.length > 0) {\n    maxRankText = `\\n1位は ${\n      userStandingsEntries[0].user_name\n    } さん (${formatScore(userStandingsEntries[0].score)} 点) だよ！`;\n  }\n\n  const tweetTitle =\n    `Replay of ${contest.contest_name} at ${dataFormat(\n      parsedDatetime,\n      'yyyy-mm-dd HH:MM:sso'\n    )}\\n` +\n    `${maxRankText}\\n` +\n    `AtCoder Marathon Replay`;\n\n  return (\n    <>\n      <hr />\n      <h4\n        style={{\n          textAlign: 'center',\n          marginTop: '30px',\n        }}\n      >\n        Replay of {contest.contest_name}\n      </h4>\n      <h5\n        style={{\n          textAlign: 'center',\n        }}\n      >\n        at {dataFormat(parsedDatetime, 'yyyy-mm-dd(ddd) HH:MM:sso')} (\n        {formatElapsedSec(\n          Math.floor(parsedDatetime.getTime() / 1000) - contest.start_time_unix\n        )}{' '}\n        elapsed)\n      </h5>\n      <PaginationProvider\n        pagination={paginationFactory({\n          custom: true,\n          sizePerPage: 20,\n          sizePerPageList: [10, 20, 50, 100, 1000],\n          totalSize: userStandingsEntries.length,\n        })}\n      >\n        {({ paginationProps, paginationTableProps }) => {\n          paginationTableProps.keyField = 'user_name';\n          paginationTableProps.data = userStandingsEntries;\n          paginationTableProps.columns = columns;\n          return (\n            <div>\n              <PaginationPanel renderSizePerPage={true} {...paginationProps} />\n              <BootstrapTable\n                bootstrap4\n                classes=\"th-center th-middle td-center td-middle table-standings\"\n                striped\n                // keyField=\"user_name\"\n                // data={userStandingsEntries}\n                // columns={columns}\n                filter={filterFactory()}\n                wrapperClasses=\"table-responsive\"\n                {...paginationTableProps}\n              />\n              <PaginationPanel renderSizePerPage={false} {...paginationProps} />\n            </div>\n          );\n        }}\n      </PaginationProvider>\n      <div style={{ textAlign: 'center' }}>\n        <TwitterShareButton\n          url={window.location.href}\n          title={tweetTitle}\n          id=\"standings-table-share-button\"\n        >\n          <TwitterIcon size={40} round />\n        </TwitterShareButton>\n        <UncontrolledTooltip\n          placement=\"top\"\n          target=\"standings-table-share-button\"\n        >\n          {(tweetTitle + ' ' + window.location.href).replaceAll('\\n', ' ')}\n        </UncontrolledTooltip>\n      </div>\n      <hr />\n    </>\n  );\n};\n","import React from 'react';\nimport useSWR from 'swr';\nimport { Alert } from 'reactstrap';\nimport { FormBlock } from './FormBlock';\nimport { StandingsTable } from './StandingsTable';\nimport {\n  fetchContests,\n  fetchContestSubmissions,\n  fetchContestTasks,\n} from '../../utils/Data';\nimport Contest from '../../interfaces/Contest';\nimport Submission from '../../interfaces/Submission';\nimport Task from '../../interfaces/Task';\n\ninterface Props {\n  match: {\n    params: {\n      contest: string;\n      datetime: string;\n    };\n  };\n}\n\nconst datetimeRegExp = /^(\\d\\d\\d\\d)-(\\d\\d)-(\\d\\d)T(\\d\\d):(\\d\\d):(\\d\\d)[+-](\\d\\d)(\\d\\d)$/;\nconst parseParamDatetime = (paramDatetime: string): Date | undefined => {\n  const datetimeRegExpMatch = datetimeRegExp.exec(paramDatetime);\n  if (datetimeRegExpMatch === null) return undefined;\n  return new Date(paramDatetime);\n};\n\nexport const StandingsPage: React.FC<Props> = (props) => {\n  const paramContest: string = props.match.params.contest ?? '';\n  const paramDatetime: string = props.match.params.datetime ?? '';\n  const parsedDatetime = parseParamDatetime(paramDatetime);\n\n  const { data: contests, error: contestsError } = useSWR<Contest[], Error>(\n    '/contests/contests',\n    fetchContests\n  );\n\n  const { data: contestTasks, error: contestTasksError } = useSWR<\n    Task[],\n    Error\n  >(paramContest.length > 0 ? `/tasks/${paramContest}` : null, () => {\n    return fetchContestTasks(paramContest);\n  });\n\n  const { data: contestSubmissions, error: contestSubmissionsError } = useSWR<\n    Submission[],\n    Error\n  >(paramContest.length > 0 ? `/submissions/${paramContest}` : null, () => {\n    return fetchContestSubmissions(paramContest);\n  });\n\n  const contestMap = contests?.reduce(\n    (prevMap: Map<string, Contest>, contest: Contest): Map<string, Contest> =>\n      prevMap.set(contest.contest_slug, contest),\n    new Map<string, Contest>()\n  );\n  return (\n    <>\n      <h2>Description</h2>\n      <p>\n        AtCoder\n        で行われたマラソンコンテストの，コンテスト中のある時点での順位表を表示します．\n      </p>\n      <p>\n        順位推移をリプレイする場合は，ページ上部ナビゲーションバーの「Chart」から．\n      </p>\n\n      <h2>Let&apos;s Replay!</h2>\n      {contestsError ? (\n        <Alert\n          color=\"danger\"\n          style={{\n            marginTop: '50px',\n            marginBottom: '50px',\n          }}\n        >\n          Failed to fetch contest list.\n        </Alert>\n      ) : contests === undefined ? (\n        <div\n          style={{\n            width: '100%',\n            height: '500px',\n            textAlign: 'center',\n            marginTop: '100px',\n            marginBottom: '100px',\n          }}\n        >\n          Fetch contest data...\n        </div>\n      ) : (\n        <FormBlock\n          paramContest={paramContest}\n          contests={contests}\n          contestMap={contestMap}\n          parsedDatetime={parsedDatetime}\n        />\n      )}\n\n      {contestSubmissionsError ? (\n        <Alert\n          color=\"danger\"\n          style={{\n            marginTop: '50px',\n            marginBottom: '50px',\n          }}\n        >\n          Failed to fetch contest submission list.\n        </Alert>\n      ) : contestTasksError ? (\n        <Alert\n          color=\"danger\"\n          style={{\n            marginTop: '50px',\n            marginBottom: '50px',\n          }}\n        >\n          Failed to fetch contest task list.\n        </Alert>\n      ) : paramContest !== '' &&\n        (contestSubmissions === undefined || contestTasks === undefined) ? (\n        <div\n          style={{\n            width: '100%',\n            height: '500px',\n            textAlign: 'center',\n            marginTop: '100px',\n            marginBottom: '100px',\n          }}\n        >\n          Fetch contest submissions/tasks data...\n        </div>\n      ) : contestSubmissions === undefined || contestTasks === undefined ? (\n        <div style={{ height: '50px' }}></div>\n      ) : parsedDatetime === undefined ? (\n        <Alert\n          color=\"danger\"\n          style={{\n            marginTop: '50px',\n            marginBottom: '50px',\n          }}\n        >\n          Invalid datetime format.\n        </Alert>\n      ) : (\n        <StandingsTable\n          contest={contestMap?.get(paramContest)}\n          contestSubmissions={contestSubmissions}\n          contestTasks={contestTasks}\n          parsedDatetime={parsedDatetime}\n        />\n      )}\n    </>\n  );\n};\n","import React from 'react';\nimport {\n  HashRouter as Router,\n  Switch,\n  Route,\n  Redirect,\n} from 'react-router-dom';\nimport { Container } from 'reactstrap';\nimport { SWRConfig } from 'swr';\nimport { NavigationBar } from './components/NavigationBar';\nimport { Supplement } from './components/Supplement';\nimport { ChartPage } from './pages/chart';\nimport { StandingsPage } from './pages/standings';\n\nconst App: React.FC = () => {\n  return (\n    <div className=\"App\">\n      <SWRConfig value={{ revalidateOnFocus: false }}>\n        <Router>\n          <NavigationBar />\n          <Container\n            style={{ width: '100%', maxWidth: '90%', marginTop: '80px' }}\n          >\n            <Switch>\n              <Route\n                exact\n                path=\"/chart/:contest/:user\"\n                component={ChartPage as React.FC}\n              />\n              <Route\n                exact\n                path=\"/chart/:contest/\"\n                component={ChartPage as React.FC}\n              />\n              <Route\n                exact\n                path=\"/standings/:contest/:datetime\"\n                component={StandingsPage as React.FC}\n              />\n              <Route\n                exact\n                path=\"/standings/:contest/\"\n                component={StandingsPage as React.FC}\n              />\n              <Route exact path=\"/chart/\" component={ChartPage as React.FC} />\n              <Route\n                exact\n                path=\"/standings/\"\n                component={StandingsPage as React.FC}\n              />\n              <Redirect path=\"/\" to=\"/chart/\" />\n            </Switch>\n            <Supplement />\n          </Container>\n          <footer\n            className=\"footer\"\n            style={{\n              marginTop: '30px',\n              padding: '30px',\n              backgroundColor: '#efefef',\n            }}\n          >\n            <div className=\"container\">\n              連絡先:{' '}\n              <a\n                href=\"https://twitter.com/iiljj\"\n                target=\"_blank\"\n                rel=\"noreferrer noopener\"\n              >\n                si (@iiljj) / Twitter\n              </a>\n              {', '}\n              <a\n                href=\"https://github.com/iilj\"\n                target=\"_blank\"\n                rel=\"noreferrer noopener\"\n              >\n                iilj (iilj) / GitHub\n              </a>\n            </div>\n          </footer>\n        </Router>\n      </SWRConfig>\n    </div>\n  );\n};\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler): void => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    void import('web-vitals').then(\n      ({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n        getCLS(onPerfEntry);\n        getFID(onPerfEntry);\n        getFCP(onPerfEntry);\n        getLCP(onPerfEntry);\n        getTTFB(onPerfEntry);\n      }\n    );\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport 'react-bootstrap-table-next/dist/react-bootstrap-table2.min.css';\nimport 'react-bootstrap-table2-paginator/dist/react-bootstrap-table2-paginator.min.css';\nimport 'react-bootstrap-table2-filter/dist/react-bootstrap-table2-filter.min.css';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}